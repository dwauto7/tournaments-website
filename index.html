<!DOCTYPE HTML>
<html>
	<head>
		<title>TournaMate - AI Blizzard Tournaments</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Page Wrapper -->
		<div id="page-wrapper">

			<!-- Header -->
			<header id="header" class="alt">
				<h1><a href="index.html">TournaMate</a></h1>
				<nav>
					<a href="#menu">Menu</a>
				</nav>
			</header>

			<!-- Menu -->
			<nav id="menu">
				<div class="inner">
					<h2>Menu</h2>
					<ul class="links">
						<li><a href="#banner">Home</a></li>
						<li><a href="#flow">How It Works</a></li>
						<li><a href="#tournaments">Tournaments</a></li>
						<li><a href="#registration">Register</a></li>
						<li><a href="#groups">View Groups</a></li>
					</ul>
					<a href="#" class="close">Close</a>
				</div>
			</nav>

			<!-- Banner -->
			<section id="banner">
				<div class="inner">
					<div class="logo"><span class="icon fa-gem"></span></div>
					<h2>TournaMate</h2>
					<p>Your AI-Powered Golf Tournament Assistant</p>
					<div class="actions special">
						<a href="#flow" class="button primary">How It Works</a>
						<a href="#tournaments" class="button">Create Tournament</a>
						<a href="#registration" class="button">Register Now</a>
						<a href="#groups" class="button">View Groups</a>
					</div>
				</div>
			</section>

			<!-- Wrapper -->
			<section id="wrapper">

				<!-- Section 1: Flow Explanation (Left aligned) -->
				<section id="flow" class="wrapper alt spotlight style1">
					<div class="inner">
						<div class="content">
							<h2 class="major">How TournaMate Works</h2>
							<div class="flow-steps">
								<div class="step">
									<h3>1. Select Tournament</h3>
									<p>Browse available golf tournaments and choose your competition</p>
								</div>
								<div class="step">
									<h3>2. Register & Provide Handicap</h3>
									<p>Enter your information and golf handicap for proper grouping</p>
								</div>
								<div class="step">
									<h3>3. Smart Grouping</h3>
									<p>12 hours before start, participants are grouped by handicap level</p>
								</div>
								<div class="step">
									<h3>4. Tournament Time!</h3>
									<p>View your group and compete with evenly matched golfers</p>
								</div>
							</div>
							<a href="#registration" class="special">Get Started</a>
						</div>
						<a href="#" class="image"><img src="images/pic01.jpg" alt="Golf Tournament Flow" /></a>
					</div>
				</section>

				<!-- Section 2: Tournaments -->
				<section id="tournaments" class="wrapper style2">
					<div class="inner">
						<h2 class="major">Create Golf Tournament</h2>
						<p>Set up your own golf tournament in minutes</p>
						
						<form id="tournamentForm">
							<div class="row gtr-uniform">
								<div class="col-6 col-12-xsmall">
									<label for="tournament-name">Tournament Name</label>
									<input type="text" id="tournament-name" placeholder="Enter tournament name" required />
								</div>
								<div class="col-6 col-12-xsmall">
									<label for="tournament-type">Tournament Type</label>
									<select id="tournament-type" required>
										<option value="golf">Golf Tournament</option>
									</select>
								</div>
								<div class="col-6 col-12-xsmall">
									<label for="start-date">Start Date</label>
									<input type="date" id="start-date" required />
								</div>
								<div class="col-6 col-12-xsmall">
									<label for="start-time">Start Time</label>
									<input type="time" id="start-time" required />
								</div>
								<div class="col-12">
									<label for="max-participants">Max Participants</label>
									<input type="number" id="max-participants" placeholder="50" min="2" max="500" required />
								</div>
								<div class="col-12">
									<button type="submit" class="button primary">Create Tournament</button>
									<p id="tournamentResponse"></p>
								</div>
							</div>
						</form>
					</div>
				</section>

				<!-- Section 3: Registration -->
				<section id="registration" class="wrapper alt style3 special">
					<div class="inner">
						<header class="major">
							<h2>Register for Tournament</h2>
							<p>Select a tournament and join the competition</p>
						</header>

						<form id="registerForm">
							<div class="row gtr-uniform">
								<div class="col-6 col-12-xsmall">
									<label for="tournament-select">Select Tournament</label>
									<select id="tournament-select" required>
										<option value="">Select Tournament</option>
										<!-- Tournaments will be populated dynamically -->
									</select>
								</div>
								<div class="col-6 col-12-xsmall">
									<label for="name">Full Name</label>
									<input type="text" id="name" placeholder="Full Name" required />
								</div>
								<div class="col-6 col-12-xsmall">
									<label for="phone">Phone Number</label>
									<input type="text" id="phone" placeholder="+60123456789" required />
								</div>
								<div class="col-6 col-12-xsmall">
									<label for="email">Email Address</label>
									<input type="email" id="email" placeholder="Email Address" required />
								</div>
								<div class="col-6 col-12-xsmall">
									<label for="handicap-number">Golf Handicap</label>
									<input type="number" id="handicap-number" placeholder="Enter 0-54" min="0" max="54" step="0.1" required />
									<small>Enter your official golf handicap index</small>
								</div>
								<div class="col-6 col-12-xsmall">
									<label for="skill-level">Skill Category</label>
									<select id="skill-level" required>
										<option value="">Select based on handicap</option>
										<option value="Scratch">Scratch Golfer (0 or better)</option>
										<option value="Low">Low Handicap (1-9)</option>
										<option value="Mid">Mid Handicap (10-19)</option>
										<option value="High">High Handicap (20-29)</option>
										<option value="Beginner">Beginner (30-54)</option>
									</select>
								</div>
								<div class="col-12">
									<button type="submit" class="button primary">Register Now</button>
									<p id="responseMessage"></p>
								</div>
							</div>
						</form>

						<div class="registration-info">
							<h3>What happens after registration?</h3>
							<ul>
								<li>✓ Your data is securely stored in our system</li>
								<li>✓ You'll receive SMS confirmation via n8n workflow</li>
								<li>✓ 12 hours before tournament: Groups will automatically be set</li>
								<li>✓ Check your group members and prepare to compete!</li>
							</ul>
						</div>
					</div>
				</section>

				<!-- Section 4: View Groups -->
				<section id="groups" class="wrapper style1">
					<div class="inner">
						<h2 class="major">View Tournament Groups</h2>
						<p>Check your group assignments and fellow competitors</p>
						
						<form id="groupsForm">
							<div class="row gtr-uniform">
								<div class="col-8 col-12-xsmall">
									<label for="group-tournament-select">Select Tournament</label>
									<select id="group-tournament-select" required>
										<option value="">Select Tournament</option>
										<!-- Tournaments will be populated dynamically -->
									</select>
								</div>
								<div class="col-4 col-12-xsmall">
									<button type="submit" class="button primary fit" style="margin-top: 1.8em;">View Groups</button>
								</div>
							</div>
						</form>

						<div id="groupsResults" style="display: none; margin-top: 2em;">
							<h3>Group Assignments</h3>
							<div class="table-wrapper">
								<table>
									<thead>
										<tr>
											<th>Group</th>
											<th>Players</th>
											<th>Average Handicap</th>
											<th>Tee Time</th>
										</tr>
									</thead>
									<tbody id="groupsTableBody">
										<!-- Groups will be populated here -->
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</section>

			</section>

			<!-- Footer -->
			<section id="footer">
				<div class="inner">
					<h2 class="major">Get in touch</h2>
					<p>Questions about tournaments or need assistance? Contact our team.</p>
					<ul class="contact">
						<li class="icon solid fa-envelope"><a href="#">support@aiblizzard.work</a></li>
						<li class="icon brands fa-discord"><a href="#">Join our Discord</a></li>
					</ul>
					<ul class="copyright">
						<li>&copy; TournaMate by AI Blizzard. All rights reserved.</li>
					</ul>
				</div>
			</section>

		</div>

		<!-- Scripts -->
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/jquery.scrollex.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>

		<!-- Custom Scripts -->
		<script>
		// Registration Form
		document.getElementById('registerForm').addEventListener('submit', async (e) => {
			e.preventDefault();
			const data = {
				tournament: document.getElementById('tournament-select').value,
				name: document.getElementById('name').value,
				phone: document.getElementById('phone').value,
				email: document.getElementById('email').value,
				handicap: document.getElementById('handicap-number').value,
				skill_level: document.getElementById('skill-level').value,
			};

			const responseBox = document.getElementById('responseMessage');
			responseBox.textContent = "Submitting registration...";

			try {
				const res = await fetch("https://d33.app.n8n.cloud/webhook/register", {
					method: "POST",
					headers: { "Content-Type": "application/json" },
					body: JSON.stringify(data)
				});
				const text = await res.text();
				responseBox.textContent = "Registration successful! You'll receive SMS confirmation shortly.";
			} catch (err) {
				responseBox.textContent = "Error submitting registration. Please try again.";
				console.error(err);
			}
		});

		// Tournament Creation Form
		document.getElementById('tournamentForm').addEventListener('submit', async (e) => {
			e.preventDefault();
			const data = {
				type: document.getElementById('tournament-type').value,
				name: document.getElementById('tournament-name').value,
				date: document.getElementById('start-date').value,
				time: document.getElementById('start-time').value,
				maxParticipants: document.getElementById('max-participants').value,
			};

			const responseBox = document.getElementById('tournamentResponse');
			responseBox.textContent = "Creating tournament...";

			try {
				const res = await fetch("https://d33.app.n8n.cloud/webhook/create-tournament", {
					method: "POST",
					headers: { "Content-Type": "application/json" },
					body: JSON.stringify(data)
				});
				const text = await res.text();
				responseBox.textContent = "Tournament created successfully!";
			} catch (err) {
				responseBox.textContent = "Error creating tournament. Please try again.";
				console.error(err);
			}
		});

		// View Groups Form
		document.getElementById('groupsForm').addEventListener('submit', async (e) => {
			e.preventDefault();
			const tournamentId = document.getElementById('group-tournament-select').value;
			
			// Show loading state
			document.getElementById('groupsResults').style.display = 'block';
			document.getElementById('groupsTableBody').innerHTML = '<tr><td colspan="4">Loading groups...</td></tr>';

			try {
				// This would call your n8n webhook to get group data
				const res = await fetch(`https://d33.app.n8n.cloud/webhook/get-groups?tournament=${tournamentId}`);
				const groups = await res.json();
				
				// Populate groups table (you'll need to adjust based on your actual API response)
				let tableHTML = '';
				groups.forEach(group => {
					tableHTML += `
						<tr>
							<td>${group.name}</td>
							<td>${group.players.join(', ')}</td>
							<td>${group.averageHandicap}</td>
							<td>${group.teeTime}</td>
						</tr>
					`;
				});
				document.getElementById('groupsTableBody').innerHTML = tableHTML;
				
			} catch (err) {
				document.getElementById('groupsTableBody').innerHTML = '<tr><td colspan="4">Error loading groups. Please try again.</td></tr>';
				console.error(err);
			}
		});
		</script>

	</body>
</html>
